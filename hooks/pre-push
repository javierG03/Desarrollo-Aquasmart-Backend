#!/bin/sh

echo "ğŸš€ Activando entorno virtual..."
VIRTUAL_ENV="virtualenv"
PATH="$VIRTUAL_ENV/Scripts:$PATH"
export PATH VIRTUAL_ENV

echo "ğŸš€ Ejecutando pruebas antes de hacer push..."

# Ejecutar pytest
pytest backend/users/Test/
pytest_exit_code=$?

# Capturar el cÃ³digo de salida de pytest
if [ $pytest_exit_code -ne 0 ]; then
    echo "âŒ Tests fallidos. No se permitirÃ¡ el push."
    exit 1
fi

echo "âœ… Todos los tests pasaron. Procediendo con el push."
exit 0
